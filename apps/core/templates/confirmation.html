{% extends "base.html" %}
{% block title %}Booking Confirmation{% endblock %}

{% block content %}
<h2>Booking Confirmation</h2>

{% if reservation %}
    <div class="confirmation-summary">
        <p><strong>Reservation Number:</strong> {{ reservation.reservationNumber }}</p>
        <p><strong>Status:</strong> {{ reservation.status }}</p>
        <p><strong>Flight:</strong> {{ reservation.flight.flight_number }} ({{ reservation.flight.airline.name }})</p>
    </div>

    <h3>Passenger(s)</h3>
    <ul>
        {% for passenger in passengers %}
            <li>
                <strong>Passport:</strong> {{ passenger.passport_number }} |
                <strong>DOB:</strong> {{ passenger.date_of_birth }}
            </li>
        {% endfor %}
    </ul>

    <h3>Seat Assignment(s)</h3>
    <ul>
        {% for seat in seats %}
            <li>
                <strong>Flight:</strong> {{ seat.flight_seat.flight.flight_number }} |
                <strong>Seat:</strong> {{ seat.flight_seat.seat_number }} |
                <strong>Type:</strong> {{ seat.flight_seat.seat_type|title }}
            </li>
        {% endfor %}
    </ul>

        <h3>Total Fare Summary</h3>
    <ul>
        <li><strong>Flight Price:</strong> ${{ flight_price }}</li>
        <li><strong>Seat(s) Total:</strong> ${{ seat_total }}</li>
        <li><strong>Total Paid:</strong> ${{ total_price }}</li>
    </ul>

    <h3>Payment Summary</h3>
    {% if reservation.payment_credit_card %}
        <p><strong>Paid via:</strong> Credit Card ending in {{ reservation.payment_credit_card.last_four_digits }}</p>
    {% elif reservation.payment_ach %}
        <p><strong>Paid via:</strong> ACH from {{ reservation.payment_ach.bank_name }}</p>
    {% elif reservation.payment_cash %}
        <p><strong>Paid via:</strong> Cash</p>
    {% else %}
        <p>No payment info found.</p>
    {% endif %}
{% else %}
    <p>No reservation found.</p>
{% endif %}

<a href="{% url 'flight_search' %}" class="styled-search-button">Book Another Flight</a>
{% endblock %}